Scheduling in Industry 4.0 and Cloud Manufacturing
Dmitry Ivanov, Boris Sokolov, D Ivanov, B Sokolov
This chapter develops a model for dynamic integrated scheduling of information services and logistics flows in the omnichannel system. The proposed service-oriented description makes it possible to coordinate the information services and material process schedules simultaneously. It also becomes possible to determine the volume of information services needed for physical supply processes. In addition, impact of disruptions in information services on the schedule execution in the physical structure is analyzed. The results provide a base for information service scheduling according to actual physical process execution.
Nowadays, companies start adopting the decentralized distributed information services (ISs). One of these concepts is omnichannel that is commonly understood as a multichannel promotion actions (in-store, social media, and mobile applications) to improve the customer experience (Ailawadi and Farris 2017) . Combination of traditional retail stores and online sales is the core idea in the omnichannel concept. Omnichannel implementation in practice is challenged by cross-channel logistics coordination, the resulting increase in coordination complexity. In addition, it requires extensions to traditional functionality in enterprise resource planning (ERP) and warehouse management system (WMS) systems (Pagani and Pardo 2017) . At the same time, omnichannel is expected to increase the reaction flexibility to demand fluctuations as well as to positively influence the lead times and capacity utilization. Moreover, the literature on supply chain resilience and first analyses of COVID-19 pandemic impacts on the supply chains and production systems show that firms with omnichannel distribution systems were able to sustain the disruptions along with the ripple effect control (Lee et al. 2020; Hosseini et al. 2019; Panetto et al. 2019; Ivanov 2020; Ivanov and Dolgui 2020a, b; Ivanov and Das 2020) . Omnichannel concept is based on the IS usage. Due to the increasing role of IS in different forms, for example, cloud computing requires service-based approaches to integrated scheduling of both material and information flows (Bardhan et al. 2010; Li et al. 2010 ). The impact of information technology (IT) on the material processes in supply network (SN) became crucial in recent years (Choi et al. 2002; Giard and Mendy 2008; Camarinha-Matos and Macedo 2010; Cannella et al. 2014 ). Recent research indicated that an aligning of business processes and information systems may potentially provide new quality of decision-making support and an increased performance (Surana et al. 2005; Dedrick et al. 2008; Jain et al. 2009; Ivanov et al. 2014) . Most of the new IT share attributes of intelligence. Examples include data mining, cloud computing, physical internet, pattern recognition, knowledge discovery, to name a few. In addition, the beginning era of Internet of Things and explicit inclusion of wireless sensor networks, machine-to-machine systems, and mobile apps into the management require the data-driven business models instead of static information architectures. Elements of physical processes are supported by information services. In addition, such systems evolve through adaptation and reconfiguration of their structures, that is, through structural dynamics (Ivanov et al. 2004 (Ivanov et al. , 2007 (Ivanov et al. , 2015 Ivanov and Sokolov 2012a, b, 2013) . Such SCs are common not only in manufacturing but also in different cyber-physical systems, for example, in networks of emergency response units, energy supply, city traffic control, and security control systems. It can be observed that current concepts and models for schedule integration do not provide adequate decision support from intelligent IS; we regard this shortcoming as an opportunity for research and development, which could significantly improve the practice of logistics management. On one hand, the alignment of new intelligent elements of IS infrastructures with real material flows can be achieved. On the other hand, investments into IS can be estimated regarding real schedules. This chapter faces these two decision domains on the basis of structural dynamics control approach that is built upon tools from optimal program control theory (Ivanov et al. 2005 . Although recent research has extensively dealt with supply chain (SC) scheduling (Chen 2010) and IS scheduling (see, e.g., works on scheduling in telecommunications) in isolation, the integrated scheduling of both material and information flows still represents a research gap Ivanov et al. 2016 Ivanov et al. , 2018 Panetto et al. 2019) . In this chapter, the problem of coordinated dynamic scheduling of IS and material flows in the context of cyber-physical systems is stated and solved with the help of optimal control approach. In addition, specific research contributions are the  Consider a simple example of the interrelations among physical processes, ISs, information functions, and information resources (IRs) that is presented in Fig. 7 .1. Such a framework is based on recent developments in cloud computing, see for example, studies by Wang et al. (2010) and Jiang et al. (2012) . For material flow scheduling and control, some ISs are needed. They should be available when material flow is scheduled and executed. The ISs are provided by some distributed IRs which may be subject to full or partial unavailability due to planned upgrades or unpredicted disruptions. Therefore, such network needs to be considered as a dynamic system Ivanov et al. 2012) . Let us define a formal scheduling problem for this framework. The majority of the technical part of this chapter is based upon the study by Ivanov et al. (2014) . • The jobs in material flows are independent and available for processing at time zero. Each of the jobs has a release date that is known in advance through the schedule coordination. • Precedence constraints exist, that is, the operations are logically arranged in jobs. • The material flow operations are executed at one of the enterprises in the network and are supported by ISs from different IRs. • Machines and IRs have unequal information processing rates which may also differ for various operations and therefore influence the processing time and processing volume. • Each IS may be composed of functions from different IRs and is characterized by availability time windows, productivity, that is, the processed volume of operations at an instant of time, and costs (fixed cost and operation cost). • Setup times are independent and included in the processing time. • Initial state and the desired end state of the dynamic system are known. • Transition from the initial state to the end state depends on selection of controls in material flow, IS, and IR reconfiguration scheduling models. • Denote A = {A í ; í = 1, . . . , n} as jobs in a material flow. • Each of the jobs A í is composed of the operations D (í) = D (í) i ; i = 1, . . . , k í . • a i is the planned processing volume (e.g., lot-size) of the operation D (í) i . • Consider a set of enterprises (machines) B = {B j ; j = 1, . . . , m}. ; r = 1, . . . , ñ í as a set of IRs. • Denote a i as processing volume of the operation D • Let t be current instant of time, T = (t 0 , t f ] the scheduling horizon, and t 0 (t f ) the start (end) instant of time for the scheduling horizon, respectively. • Denote å(t) as an element of the matrix of time-spatial constraints ( where k are the numbers of time windows available for operation execution (e.g., subject to maintenance). . . , S l as a set of functions of IR to implement the service. • Denote fixed cost as c (í,1) il (t) and operation cost as c l as a number of operations D (í) i which may be processed by a service S as a given number of services S (í) l which may be simultaneously used by execution of the operation D (í) i . . . , S l as operations of IR (e.g., information processing, storage, transmission, and protection). ÷ as the online storage capacity of the IR B (í,i) r to execute the operation D (í,i) <l,÷ > and ä (í,l) ÷ r (ô ) as a quality function to estimate the execution results. In order to describe the execution of operations, let us introduce the state variables: is an auxiliary variable characterizing the current state of the operation D (í) i . Its value is numerically equal to the time interval that has elapsed since the beginning of the scheduling interval and the execution start of the operation D is an auxiliary variable characterizing the current state of the processing operation. Its value is numerically equal to the time interval that has elapsed since the end of the execution of the operation D  is an auxiliary variable characterizing the current state of the information processing operation. Its value is numerically equal to the time interval that has elapsed since the end of the execution of the operation D (í,j ) <l,÷ > and the instant of i has not started and is equal 0 otherwise; • w (í,l) ÷ r is a control that is equal to 1 if the operation D (í,j ) <l,÷ > is assigned to the IR B (í,i) r and is equal 0 otherwise; • ù (í,l) rS l (t) is auxiliary control that is equal to 1 if all the operations D (í,j ) <l,÷ > in the function F (í,l) ÷ are completed and is equal 0 otherwise; • ? (p,2) r (t) is auxiliary control that is equal to 1 if the reconfiguration from old parameters e (i) r is completed and is 0 otherwise. The problem is to find a joint schedule for dynamic execution of information services and physical flows, that is, two schedules should be generated in a coordinated manner, that is, • an optimal program control (OPC) (schedule) for the integrated execution of material flows and information services (model M1), • an OPC (schedule) for the execution of information services within the IRs (model M2). Jobs are to be scheduled subject to maximal customer service level (i.e., minimal lateness), minimal backlogs, minimal idle time of services, and minimal costs of IT (e.g., fixed, operation, and idle costs). In this section, we describe both general methodology and method for formulation of the integrated scheduling model in particular. The logistics network dynamic characteristics are distributed upon different structures, that is: • organizational structure dynamics (i.e., agile supply structure), • functional structure dynamics (i.e., flexible competencies), • information structure dynamics (i.e., fluctuating information availability), and • financial structure dynamics (i.e., cost and profit sharing). This multidimensional dynamic space along with the coordinated and distributed decision-making leads us to the understanding of the logistics network as multistructural systems with structure dynamics. The main idea of the proposed method is the dynamic interpretation of planning in accordance with the natural logic of time with the help of OPC. The solution procedure is transferred to mathematical programming (MP). In this setting, the solution procedure becomes undependable from the continuous optimization and can be of a discrete nature, for example, an integer linear program . The modeling procedure is based on the dynamic representation where the scheduling decisions are taken for certain intervals of structural constancy and regarding problems of significantly smaller dimensionality. For each interval, a static optimization problem of a smaller dimensionality can be solved with the help of MP. The transitions between the intervals are modeled in the dynamic OPC model. The computational time decreases considerably. Besides, a priori knowledge of the logistics network structure, and moreover, structure dynamics, is no more necessary-the structures and corresponding functions are optimized simultaneously as the control becomes a function of both states and structures. The splitting of the planning period into the intervals occurs according to the natural logic of time and events. As the proposed method is based on control theory, it is a convenient approach to describe intangible services due to abstract nature of state variables which can be interpreted as abstract service volumes. The basic conceptual idea of this approach is that the operations and machine availability are dynamically distributed in time on the scheduling horizon. As such, not all operations and machines are involved in decision-making at the same time. Therefore, it becomes quite natural to transit from large-size allocation matrices with a high number of binary variables to a scheduling problem that is dynamically decomposed. In following an approach to decompose the solution space and to use exact methods over its restricted subspaces, we propose to use the OPC theory for the dynamic scheduling problem decomposition. Computational procedure will be based on modified maximum principle in continuous form blended with MP. That is why the basic technical idea of our approach, which extends the previous application of maximum principle to production and logistics, is to apply the methods of discrete optimization for combinatorial tasks within certain time intervals and to use the OPC with all its advantages (i.e., accuracy of continuous time, integration of planning and control, and the operation execution parameters as time functions) for (1) flow control within the operations and (2) interlinking the partial (decomposed) solutions into the optimal schedule. The SN is modeled as a networked control system described through a dynamic interpretation of the operations' execution. The execution of operations is characterized by (1) results (e.g., processed volume and completion time), (2) intensity consumption of the machines, and (3) supply and information flows resulting from the schedule execution. The operations control model (M1) is first used to assign and sequence ISs to operations in material flows, and then a flow control model (M2) is employed to assign and schedule jobs at IRs subject to the requirements on the ISs availability. The basic interaction of these two models is that after the solving M1, the found control variables are used in the constraints of M2. Note that in the calculation procedure, the models M1 and M2 will be solved simultaneously, that is, the scheduling problems in all the structures (i.e., material flows, ISs, and IRs) will be integrated. The model of operation execution dynamics can be expressed as (7.1)-(7.3): 3) Equation (7.1) describes operation execution dynamics subject to availability of IS described in the matrix function å il (t). u (í) The control actions are constrained as follows: Constraints (7.4) are assignment problem constraints. They define possibilities of parallel use of many services for one operation and for parallel processing of many operations at one service. Constraints (7.5) determine the precedence relations. Constraints (7.6) interconnect main and auxiliary controls. Equation (7.7) constraints control to be Boolean variables. Remark 7.1 Note that constraints (7.4)-(7.7) are identical to those in MP models. However, at each t-point of time, the number of variables is determined by the operations which are currently in the "scheduling window." Therefore, the tendency will be to have small-size instances and to apply known methods for the solution of MP models (e.g., Hungarian or Branch & Bound methods) subject to the problems (7.1)-(7.12). The boundary conditions are defined as shown in Eqs. (7.8) and (7.9): ? R 1 (7.9) Equations (7.8) and (7.9) define initial and end values of the variables x (í) Remark 7.2 End conditions in OPC models play the role of demand variables in MP models. Conditions (7.9) reflect the desired end state. The right parts of equations are predetermined at the planning stage subject to the planned demand for each job. The goals are defined as shown in Eqs. (7.10)-(7.12): il (ô ) dô (7.12) Equation (7.10) minimizes losses from the idle time of services. Equation (7.11) estimates the service level by the volume of on-time completed jobs in the material flow. Equation (7.12) minimizes total costs of IS. The model of operation execution dynamics in the IRs can be expressed as (7.13): (7.13) Equation (7.13) describes operation's execution dynamic in the IR subject to operation of the IRs and recovery operations in the case of disruptions in the information structure. The control actions are constrained as shown in Eqs. (7.14)-(7.20):  The developed modeling complex is composed of dynamic models of IS and IR control subject to execution of material flows. It also includes elements of IR reconfiguration [e.g., in Eqs. (7.14)-(7.16) and (7.20)]. Full consideration of the reconfiguration model can be found in (Ivanov and Sokolov 2013) . The presented models M1 and M2 are interconnected with the help of Eq. (7.6) where elements from M2 are used in M1. In its turn, M1 influences M2 through Eqs. (7.14) and (7.20). The proposed models and algorithms have been validated in a developed prototype based on C++ and XML. The OPC calculation is based on the Hamiltonian function. In integrating the main and the conjunctive equation systems, the values of variables in both of the systems can be obtained at each point of time. The maximum principle guarantees that the optimal solutions (i.e., the solution with maximal values) of the instantaneous problems (i.e., at each point of time) give the optimal solution to the overall problem. For these subproblems, optimal solutions can be found, for example, with the help of MP. Then these solutions are linked into an OPC. Let us discuss optimality and sufficiency properties that have been proved theoretically and experimentally. The formulated scheduling model satisfies the conditions of the existence theorem in Lee and Markus (1967, Theorem 4, Corollary 2) , which allows us to assert the existence of the optimal solution in the appropriate class of admissible controls. The formulated scheduling problem is the standard problem of OPC with mixed constraints and its optimal solution and relaxed system can be obtained with the help of local cut method-based modification of the continuous maximum principle. An analysis of constraints in M1 and M2 shows that both state and control variables are constrained (i.e., the mixed state-control constraints exist Boltyanskiy 1973) and form therefore a dynamic system with a variable control domain. To obtain necessary conditions of control optimality, Boltyansky's method of local sections can be used. Then the necessary conditions can be formulated in the form of the Boltyanskiy's theorem (maximum principle) (1973). Corollary 7.1 Analysis of Boltyanskiy (1973) and Moiseev (1974) shows that for the linear nonstationary finite-dimensional systems (models M1 and M2) with the convex area of admissible control Q(x) and performance indicators (7.10)-(7.12) and (7.23)-(7.26), the stated necessary conditions of optimality are also the conditions of sufficiency. According to study (Ivanov and Sokolov 2012a) , the initial problem of nonclassical calculus of variations can be transformed to the two-point boundary problem help of local cut method. The assignment and routing at each instant of time are performed on the basis of the "dynamic priority" of the operations. The dynamic priority includes both the values of conjunctive variables and the current values of the goal functions (7.10)-(7.12) and (7.23)-(7.26). Theorem 7.1 Let be a relaxed problem for the basic OPC problem. Then (a) If the problem does not have allowable solutions, then this is true for the problem PS as well. (b) If the OPC of the problem is allowable, then it is the OPC for the problem PS as well. (a) If the problem does not have allowable solutions, then a control u(t) transferring dynamic system (7.1)-(7.3) and (7.13)? = f (x, u, t) from a given initial state to a given final state does not exist. The same end conditions are violated in the OPC problem. (b) Let u * (t), ? t ? (T 0 , T f ] be an OPC in and x(t) be a solution to models M1 and M2 subject to u(t) = u * (t). Then u * (t) meets the requirements of the local cut method and maximizes Hamiltonian for the OPC problem. Hence, vector u * (t) and x * (t) return minimum to performance indicators (7.10)-(7.12) and (7.23)-(7.26). The proof is complete. As the dynamics of state and conjunctive variables is described by differential equations, it becomes possible to calculate these variables at any instant of time subject to given initial conditions. Therefore, the Hamiltonian becomes the function of only one variable u that can be calculated at any t subject to allowable control from u ? G u . Therefore, the OPC problem can be reduced to a boundary problem with the help of the local cut method. Let us consider the algorithmic realization of the above-described modified maximum principle. After transforming to the boundary problem, a relaxed problem can be solved to receive OPC for the schedule of the model M1, for computation of which the main and conjunctive systems are integrated, that is, the OPC vector u * (t) and the state trajectory x * (t) are obtained. The OPC vector at time t = T 0 and for the given value of ø(t) should return maximum criteria indicators (7.10)-(7.12) and (7.23)-(7.26) have been transformed to a general performance index and expressed in a scalar form J G . The basic peculiarity of the considered boundary problem is that the initial conditions for the conjunctive variables ø(t 0 ) are not given. At the same time, an OPC should be calculated subject to end conditions (7.8) and (7.9) and (7.21) and (7.22). To obtain the conjunctive system vector, we use the Krylov-Chernousko method for OPC problem with free right end that is based on joint use of modified successive approximations method and branch-and-bound method. We propose to use a heuristics schedule u(t) to obtain the initial conditions for ø(t 0 ). Then, the algorithm can be stated as follows: • Step 1: An initial solution u(t), t ? T 0 , T f is calculated and iteration step r = 0. • Step 2: The parameters of the gained schedule u(t), t ? T 0 , T f are put into Eqs. (7.1)-(7.3) and (7.13) and integrated. As a result of the dynamic model run, a new trajectory of operation states x (r) (t) is received. Besides, if t = T f then the record value J G = J (r) G can be calculated. • Step 3: Then, the transversality conditions are evaluated. The conjugate system is integrated subject to u(t) = u(t) and over the interval from t = T f to t = T 0 . For t = T 0 , the first approximation ø (r) l (T 0 ) is received as a result. Here, the iteration number r = 0 is completed. • Step 4: The control u (r) (t) being searched for subject to maximization of the Hamiltonian function. The iterative process of the optimal schedule search is terminated as follows: either the allowable solution is determined, or at the fourth step no significant improvement is achieved. Analogously, the OPC for the schedule of the model M2 can be obtained through the integration of corresponding conjunctive systems. Subsequently, through the reverse integration of the main equation systems, the mutual interrelating of the models M1 and M2 is realized. 